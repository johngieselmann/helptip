/**
 * Helptip - jQuery Plugin
 * Displays a help tip for the target element(s) on hover or touch.
 *
 * Source files and information can be found here:
 *  https://github.com/untapped/helptip
 *  
 * Copyright (c) 2012 - 2013 Untapped Venue, LLC
 * www.untappedvenue.com
 *
 * Version: 1.0
 * Requires : jQuery Version 1.4.2 + (this is what it was built on)
 *
 */
(function($){$.fn.helptip=function(options){var self=this;this.defaults={arrowWidth:7,helperClass:'helptip',helperId:'helptip',helperStyles:{},innerClass:'helptip-inner',innerId:'helptip-inner',innerStyles:{},onHide:false,onShow:false,position:'top-center',showArrow:true,showHidden:false,spacing:3};this.options=$.extend({},this.defaults,options);this.space={top:parseInt(this.options.spacing),left:parseInt(this.options.spacing),arrowHor:10,arrowVer:2};this.disabledTip=false;this.helper;this.helperArrow1;this.helperArrow2;this.helperArrow3;this.helperInner;this.info={helper:null,helperInner:null,element:null};this.element=null;this.elementTitle=null;this.prevElement=null;this.prevTitle=null;this.isTouch=(/iphone|ipad|ipod|android/i).test(navigator.userAgent);this.isWebkit=(/AppleWebKit/).test(navigator.userAgent);this.isGecko=!self.isWebkit&&(/Gecko/).test(navigator.userAgent);this.isIE=(/MSIE/).test(navigator.userAgent);this.isIE6=self.isIE&&/MSIE [56]/.test(navigator.userAgent);this.isIE7=self.isIE&&/MSIE [7]/.test(navigator.userAgent);this.isIE8=self.isIE&&/MSIE [8]/.test(navigator.userAgent);this.isIE9=self.isIE&&/MSIE [9]/.test(navigator.userAgent);this.OVER=self.isTouch?'touchend':'mouseover';this.OUT=self.isTouch?'touchend':'mouseout';this.createHelper=function(){self.helperInner=$('<div></div>');self.helperInner.attr('id',self.options.innerId);self.helperInner.addClass(self.options.innerClass);for(var i in self.options.innerStyles){self.helperInner.css(i,self.options.innerStyles[i]);}
self.helper=$('<div></div>');self.helper.attr('id',self.options.helperId);self.helper.addClass(self.options.helperClass);self.helper.append(self.helperInner);for(var j in self.options.helperStyles){self.helper.css(j,self.options.helperStyles[j]);}
self.helper.appendTo(document.body);if(self.options.showArrow)self.createArrow();}
this.createArrow=function(){self.helperArrow1=$('<div></div>');self.helperArrow1.addClass('helptip-arrow');self.helperArrow1.appendTo(self.helper);self.helperArrow2=$('<div></div>');self.helperArrow2.addClass('helptip-arrow');self.helperArrow2.appendTo(self.helper);self.helperArrow3=$('<div></div>');self.helperArrow3.addClass('helptip-arrow');self.helperArrow3.appendTo(self.helper);}
this.showHelper=function(event,targ){if(self.disabledTip)return;event.stopPropagation();if(self.isTouch&&self.element==targ){self.hideHelper();return;}
self.element=targ;if(!self.options.showHidden){var alpha=0;var opacity=parseInt($(self.element).css('opacity'));if((/msie/i).test(navigator.userAgent))
alpha=parseInt($(self.element).css('opacity').replace(/\D/,''));if(opacity==0&&alpha==0){self.prevElement=self.element;self.element=null;return;}}
self.helper.hide();self.elementTitle=$(self.element).attr('title');$(self.element).removeAttr('title');self.helperInner.text(self.elementTitle);self.calcElementInfo();self.calcInfo('helper');self.calcInfo('helperInner');var pos=self.calcHelperPosition();self.helper.css({left:pos.left,top:pos.top});self.calcInfo('helper');self.calcInfo('helperInner');if(self.options.showArrow){var arrowPos=self.calcArrowPosition();for(var i in arrowPos.a1)self.helperArrow1.css(i,arrowPos.a1[i]);for(var j in arrowPos.a2)self.helperArrow2.css(j,arrowPos.a2[j]);for(var k in arrowPos.a3)self.helperArrow3.css(k,arrowPos.a3[k]);if(self.options.position=='left'||self.options.position=='right'){pos=self.calcHelperPosition();self.helper.css({left:pos.left,top:pos.top});}}
self.helper.show();if(typeof self.options.onShow=='function')self.options.onShow(event,$(self.element),self.helper);}
this.hideHelper=function(event){$(self.element).attr('title',self.elementTitle);self.prevTitle=self.elementTitle;self.elementTitle=null;self.prevElement=self.element;self.element=null;self.helper.hide();if(event)
event.stopPropagation();if(typeof self.options.onHide=='function')self.options.onHide(event,$(self.prevElement),self.helper);}
this.calcHelperPosition=function(){var pos={left:self.info.element.offset.left,top:self.info.element.offset.top};self.space=self.options.showArrow?self.calcSpacing():self.space;switch(self.options.position){case'top-left':pos.top-=(self.info.helper.outerHeight+self.space.top);pos.left-=(self.info.helper.outerWidth-self.space.left);break;case'top-center':pos.top-=(self.info.helper.outerHeight+self.space.top);pos.left-=((self.info.helper.outerWidth-self.info.element.outerWidth)/2);break;case'top-right':pos.top-=(self.info.helper.outerHeight+self.space.top);pos.left+=(self.info.element.width+self.space.left);break;case'bottom-left':pos.top+=(self.info.element.height+self.space.top);pos.left-=(self.info.helper.outerWidth-self.space.left);break;case'bottom-center':pos.top+=(self.info.element.height+self.space.top);pos.left-=((self.info.helper.outerWidth-self.info.element.outerWidth)/2);break;case'bottom-right':pos.top+=(self.info.element.height+self.space.top);pos.left+=(self.info.element.width+self.space.left);break;case'left':pos.top-=((self.info.helper.outerHeight-self.info.element.height)/2);pos.left-=(self.info.helper.outerWidth+self.space.left);break;case'right':pos.top-=((self.info.helper.outerHeight-self.info.element.height)/2);pos.left+=(self.info.element.width+self.space.left);break;}
return pos;}
this.calcArrowPosition=function(){var pos={a1:{},a2:{},a3:{}};var a1Color;var a2Color=self.info.helper.background.color;var a3Color=self.info.helperInner.background.color;switch(self.options.position){case'top-left':case'top-center':case'top-right':a1Color=self.info.helper.border.bottom.color;break;case'bottom-left':case'bottom-center':case'bottom-right':a1Color=self.info.helper.border.top.color;break;case'left':a1Color=self.info.helper.border.right.color;break;case'right':a1Color=self.info.helper.border.left.color;break;}
var side;switch(self.options.position){case'top-left':case'top-center':case'top-right':side='bottom';break;case'bottom-left':case'bottom-center':case'bottom-right':side='top';break;case'left':case'right':self.calcInfo('helperInner');if(self.info.helper.outerHeight%2!=0){self.helper.height(self.info.helper.height+1);self.helperInner.height(self.info.helperInner.height+1);self.calcInfo('helper');self.calcInfo('helperInner');}
var r1=self.options.position=='left'?self.info.helperInner.border.radius.topRight:self.info.helperInner.border.radius.topLeft;var r2=self.options.position=='left'?self.info.helperInner.border.radius.bottomRight:self.info.helperInner.border.radius.bottomLeft;side=self.options.position=='left'?'right':'left';var innerTotal=self.info.helperInner.height+self.info.helperInner.padding.top+self.info.helperInner.padding.bottom;var availableHeight=(innerTotal-r1-r2)/2;self.options.arrowWidth=self.options.arrowWidth>availableHeight?availableHeight-self.space.arrowVer:self.options.arrowWidth;break;}
var a3Width=self.options.arrowWidth.toString()+'px';var a2Width=(self.options.arrowWidth+self.info.helper.padding[side]).toString()+'px';var a1Width=(parseInt(a2Width)+self.info.helper.border[side].width-1).toString()+'px';switch(self.options.position){case'bottom-left':case'bottom-center':case'bottom-right':var a1Top='-'+(parseInt(a1Width)+self.info.helper.border.top.width).toString()+'px';var a2Top='-'+a2Width;var a3Top='-'+(parseInt(a3Width)-self.info.helper.padding.top).toString()+'px';pos.a1['top']=a1Top;pos.a2['top']=a2Top;pos.a3['top']=a3Top;break;case'left':case'right':pos.a1['top']=pos.a2['top']=pos.a3['top']='50%';pos.a1['margin-top']='-'+a1Width;pos.a2['margin-top']='-'+a2Width;pos.a3['margin-top']='-'+a3Width;break;}
switch(self.options.position){case'top-left':case'top-right':case'bottom-left':case'bottom-right':var arrowRight=self.info.helper.offset.right-self.info.helper.border.right.width;var a1Mid=arrowRight-parseInt(a1Width);var a2Mid=arrowRight-parseInt(a2Width);var a3Mid=arrowRight-parseInt(a3Width);pos.a1['right']=a1Mid-self.info.element.offset.midH;pos.a2['right']=a2Mid-self.info.element.offset.midH;pos.a3['right']=a3Mid-self.info.element.offset.midH;break;case'right':pos.a1['right']=pos.a2['right']=pos.a3['right']='100%';pos.a1['margin-right']=(self.info.helper.border.right.width-1).toString()+'px';pos.a2['margin-right']=-1;pos.a3['margin-right']='-'+(self.info.helper.padding.right).toString()+'px';break;}
switch(self.options.position){case'top-left':case'top-center':case'top-right':var a1Bottom='-'+(parseInt(a1Width)+self.info.helper.border.bottom.width).toString()+'px';var a2Bottom='-'+a2Width;var a3Bottom='-'+(parseInt(a3Width)-self.info.helper.padding.bottom).toString()+'px';pos.a1['bottom']=a1Bottom;pos.a2['bottom']=a2Bottom;pos.a3['bottom']=a3Bottom;break;}
switch(self.options.position){case'top-center':case'bottom-center':pos.a1['left']=pos.a2['left']=pos.a3['left']='50%';pos.a1['margin-left']='-'+a1Width;pos.a2['margin-left']='-'+a2Width;pos.a3['margin-left']='-'+a3Width;break;case'left':pos.a1['left']=pos.a2['left']=pos.a3['left']='100%';pos.a1['margin-left']=(self.info.helper.border.right.width-1).toString()+'px';pos.a2['margin-left']=-1;pos.a3['margin-left']='-'+(self.info.helper.padding.right).toString()+'px';break;}
switch(self.options.position){case'top-left':case'top-center':case'top-right':pos.a1['border-top']=a1Width+' solid '+a1Color;pos.a2['border-top']=a2Width+' solid '+a2Color;pos.a3['border-top']=a3Width+' solid '+a3Color;break;case'left':case'right':pos.a1['border-top']=a1Width+' solid transparent';pos.a2['border-top']=a2Width+' solid transparent';pos.a3['border-top']=a3Width+' solid transparent';break;}
switch(self.options.position){case'top-left':case'top-center':case'top-right':case'bottom-left':case'bottom-center':case'bottom-right':pos.a1['border-left']=pos.a1['border-right']=a1Width+' solid transparent';pos.a2['border-left']=pos.a2['border-right']=a2Width+' solid transparent';pos.a3['border-left']=pos.a3['border-right']=a3Width+' solid transparent';break;case'right':pos.a1['border-right']=a1Width+' solid '+a1Color;pos.a2['border-right']=a2Width+' solid '+a2Color;pos.a3['border-right']=a3Width+' solid '+a3Color;break;case'left':pos.a1['border-left']=a1Width+' solid '+a1Color;pos.a2['border-left']=a2Width+' solid '+a2Color;pos.a3['border-left']=a3Width+' solid '+a3Color;break;}
switch(self.options.position){case'bottom-left':case'bottom-center':case'bottom-right':pos.a1['border-bottom']=a1Width+' solid '+a1Color;pos.a2['border-bottom']=a2Width+' solid '+a2Color;pos.a3['border-bottom']=a3Width+' solid '+a3Color;break;case'left':case'right':pos.a1['border-bottom']=a1Width+' solid transparent';pos.a2['border-bottom']=a2Width+' solid transparent';pos.a3['border-bottom']=a3Width+' solid transparent';break;}
return pos;}
this.calcSpacing=function(){self.space.top=parseInt(self.options.spacing);self.space.left=parseInt(self.options.spacing);var helperPadHor=parseInt(self.helper.css('padding-top'))+parseInt(self.helper.css('padding-bottom'));var helperPadVer=parseInt(self.helper.css('padding-left'))+parseInt(self.helper.css('padding-right'));switch(self.options.position){case'top-left':self.space.top+=self.options.arrowWidth+self.info.helper.padding.bottom+self.info.helper.border.bottom.width-self.space.arrowVer;self.space.left+=self.info.element.width+self.info.helper.padding.right+self.info.helper.padding.left
+self.info.helper.border.right.width+self.info.helper.border.left.width+self.space.arrowHor;break;case'top-center':self.space.top+=self.options.arrowWidth+self.info.helper.padding.bottom+self.info.helper.border.bottom.width-self.space.arrowVer;break;case'top-right':self.space.top+=self.options.arrowWidth+self.info.helper.padding.bottom+self.info.helper.border.bottom.width-self.space.arrowVer;self.space.left-=self.info.element.width+self.info.helper.padding.right+self.info.helper.padding.left
+self.info.helper.border.right.width+self.info.helper.border.left.width+self.space.arrowHor;break;case'bottom-left':self.space.top+=self.options.arrowWidth+self.info.helper.padding.top+self.info.helper.border.top.width-self.space.arrowVer;self.space.left+=self.info.element.width+self.info.helper.padding.right+self.info.helper.padding.left
+self.info.helper.border.right.width+self.info.helper.border.left.width+self.space.arrowHor;break;case'bottom-center':self.space.top+=self.options.arrowWidth+self.info.helper.padding.top+self.info.helper.border.top.width-self.space.arrowVer;break;case'bottom-right':self.space.top+=self.options.arrowWidth+self.info.helper.padding.top+self.info.helper.border.top.width-self.space.arrowVer;self.space.left-=self.info.element.width+self.info.helper.padding.right+self.info.helper.padding.left
+self.info.helper.border.right.width+self.info.helper.border.left.width+self.space.arrowHor;break;case'left':self.space.left+=self.options.arrowWidth+self.info.helper.padding.right+self.info.helper.border.right.width-2;break;case'right':self.space.left+=self.options.arrowWidth+self.info.helper.padding.left+self.info.helper.border.left.width;break;}
return self.space;}
this.calcInfo=function(targ){var prefix=self.isWebkit?'-webkit-':self.isIE9?'':false;var jqs=targ=='helper'?self.helper:self.helperInner;self.info[targ]={background:{color:jqs.css('background-color')},border:{top:{color:jqs.css('border-top-color'),width:parseInt(jqs.css('border-top-width'))},right:{color:jqs.css('border-right-color'),width:parseInt(jqs.css('border-right-width'))},bottom:{color:jqs.css('border-bottom-color'),width:parseInt(jqs.css('border-bottom-width'))},left:{color:jqs.css('border-left-color'),width:parseInt(jqs.css('border-left-width'))}},height:parseInt(jqs.height())==0?parseInt(jqs.css('height')):parseInt(jqs.height()),offset:{top:parseInt(jqs.css('top')),right:parseInt(jqs.css('left'))+parseInt(jqs.outerWidth())-1,bottom:parseInt(jqs.outerHeight())+parseInt(jqs.css('top'))-1,left:parseInt(jqs.css('left')),midH:parseInt(jqs.css('left'))+(parseInt(jqs.outerWidth())/2),midV:parseInt(jqs.css('top'))+(parseInt(jqs.outerHeight())/2)},outerHeight:parseInt(jqs.outerHeight()),outerWidth:parseInt(jqs.outerWidth()),padding:{top:parseInt(jqs.css('padding-top')),right:parseInt(jqs.css('padding-right')),bottom:parseInt(jqs.css('padding-bottom')),left:parseInt(jqs.css('padding-left')),},width:parseInt(jqs.width())};if(self.isGecko){self.info[targ].border.radius={topLeft:parseInt(jqs.css('-moz-border-radius-topleft')),topRight:parseInt(jqs.css('-moz-border-radius-topright')),bottomLeft:parseInt(jqs.css('-moz-border-radius-bottomleft')),bottomRight:parseInt(jqs.css('-moz-border-radius-bottomright'))};}
else if(prefix){self.info[targ].border.radius={topLeft:parseInt(jqs.css(prefix+'border-top-left-radius')),topRight:parseInt(jqs.css(prefix+'border-top-right-radius')),bottomLeft:parseInt(jqs.css(prefix+'border-bottom-left-radius')),bottomRight:parseInt(jqs.css(prefix+'border-bottom-right-radius'))};}
else{self.info[targ].border.radius={topLeft:0,topRight:0,bottomLeft:0,bottomRight:0};}
return self.info[targ];}
this.calcElementInfo=function(){self.info.element={border:{top:{color:$(self.element).css('border-top-color'),width:parseInt($(self.element).css('border-top-width'))},right:{color:$(self.element).css('border-right-color'),width:parseInt($(self.element).css('border-right-width'))},bottom:{color:$(self.element).css('border-bottom-color'),width:parseInt($(self.element).css('border-bottom-width'))},left:{color:$(self.element).css('border-left-color'),width:parseInt($(self.element).css('border-left-width'))}},height:parseInt($(self.element).height()),offset:{top:parseInt($(self.element).offset().top),right:parseInt($(self.element).offset().left)+parseInt($(self.element).outerWidth()),bottom:parseInt($(self.element).outerHeight())+parseInt($(self.element).offset().top),left:parseInt($(self.element).offset().left),midH:parseInt($(self.element).offset().left)+(parseInt($(self.element).outerWidth())/2),midV:parseInt($(self.element).offset().top)+(parseInt($(self.element).outerHeight())/2)},outerHeight:parseInt($(self.element).outerHeight()),outerWidth:parseInt($(self.element).outerWidth()),padding:{top:parseInt($(self.element).css('padding-top')),right:parseInt($(self.element).css('padding-right')),bottom:parseInt($(self.element).css('padding-bottom')),left:parseInt($(self.element).css('padding-left')),},width:parseInt($(self.element).width())};return self.info.element;}
this.correctOptions=function(){if(typeof self.options.lineHeight=='number'){self.options.lineHeight=self.options.lineHeight.toString()+'px';}
else if(typeof self.options.lineHeight=='string'){if(!self.options.lineHeight.match(/px$|%$|em$/)){self.options.lineHeight=parseInt(self.options.lineHeight).toString()+'px';}}}
this.disable=function(){self.disabledTip=true;if(self.element)self.hideHelper(window.event);};this.enable=function(){self.disabledTip=false;};self.correctOptions();self.createHelper();return this.each(function(){$(this).unbind(self.OVER).bind(self.OVER,function(event){if($(this).attr('title')!='')
self.showHelper(event,this);});if(self.isTouch)
$(document).bind(self.OVER,self.hideHelper);else
$(this).unbind(self.OUT).bind(self.OUT,self.hideHelper);});};})(jQuery);